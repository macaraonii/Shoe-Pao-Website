<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - SHOEPAO</title>
    <link rel="stylesheet" href="style.css">
    <style>
        html {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            font-family: 'Poppins', Arial, sans-serif;
            background: #fff;
            margin: 0;
            padding: 0;
            color: #222;
        }
        .homepage-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0;
            height: 72px;
            background: #fff;
            border-bottom: 1px solid #eee;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        .header-logo {
            height: 41.74px;
            width: auto;
            margin-right: 8px;
            cursor: pointer;
        }
        .header-caption {
            font-size: 1.18rem;
            font-weight: 600;
            color: #b71c1c;
            cursor: pointer;
        }
        .header-link {
            font-size: 1.05rem;
            font-weight: 500;
            color: #222;
            margin-right: 8px;
            cursor: pointer;
            transition: color 0.2s;
        }
        .header-link:hover {
            color: #b71c1c;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 18px; /* match product-list header icon spacing */
        }
        .header-icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 6px; /* align with product-list icon button spacing */
            display: flex;
            align-items: center;
        }
        .header-icon {
            width: 26px;
            height: 26px;
        }
        .search-box {
            display: none;
            position: absolute;
            top: 72px;
            right: 80px;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 8px 16px;
            z-index: 101;
        }
        .search-input {
            font-family: 'Poppins', Arial, sans-serif;
            font-size: 1rem;
            border: none;
            outline: none;
            width: 220px;
            padding: 6px 0;
        }
        .banner-section {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        .banner {
            position: relative;
            width: 100%;
            height: 357px;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            background-size: cover;
            background-position: center;
        }
        .banner-content {
            position: absolute;
            left: 7vw; /* inset banner content to align with page content */
            top: 140px;
            color: #fff;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        /* Brand dropdown styling */
        .brand-dropdown {
            display: none;
            position: absolute;
            top: 100%; /* place right below the parent */
            left: 50%; /* center under the parent */
            transform: translateX(-50%);
            background: #fff;
            color: #222;
            border: 1px solid #eee;
            padding: 8px 10px;
            border-radius: 6px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            z-index: 120;
            white-space: nowrap;
            text-align: center;
        }
        .brand-drop-link { display: inline-block; margin: 4px 8px; }
    /* ensure brand nav container positions dropdown */
    #brandNav { position: relative; }
        .banner-header {
            font-size: 2.2rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 8px rgba(0,0,0,0.18);
        }
        .banner-subheader {
            font-size: 1.15rem;
            font-weight: 400;
            color: #fff;
            text-shadow: 0 1px 6px rgba(0,0,0,0.12);
        }
        .banner-btn {
            background: #fff;
            color: #222;
            border: none;
            border-radius: 22px;
            padding: 10px 18px;
            font-size: 1.08rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.10);
            /* allow JS to set explicit pixel width; provide a sensible minimum */
            min-width: 120px;
            max-width: 480px;
        }
        .banner-btn .arrow {
            display: inline-block;
            width: 0; height: 0;
            border-left: 10px solid #222;
            border-top: 7px solid transparent;
            border-bottom: 7px solid transparent;
        }
        .divider {
            width: 100%;
            height: 2px;
            background: #eee;
            margin: 48px auto 32px auto;
        }
        .section-header {
            font-size: 1.7rem;
            font-weight: 600;
            color: #222;
            margin-left: 7vw;
            margin-bottom: 24px;
        }
        /* Make Sale header top spacing match the gap between Sale cards and New Arrival header */
        /* Sale shoe cards use `margin-bottom: 48px` so we match that on desktop */
        section#sale .section-header {
            margin-top: 0; /* header already has bottom spacing; keep top zero */
        }
        @media (max-width: 900px) {
            section#sale .section-header { margin-top: 0; }
        }
        @media (max-width: 700px) {
            section#sale .section-header { margin-top: 0; }
        }
        /* Ensure spacing cannot collapse: add padding on the sale section itself to match sale-row bottom */
        section#sale {
            padding-top: 48px; /* match .sale-row { margin-bottom: 48px } */
        }
        @media (max-width: 900px) {
            section#sale { padding-top: 24px; }
        }
        @media (max-width: 700px) {
            section#sale { padding-top: 12px; }
        }
        /* center headers for Sale and New Arrivals only */
        section#sale .section-header,
        section#new-arrivals .section-header {
            margin-left: 0;
            text-align: center;
            margin: 0 auto 24px auto;
        }
        .sale-row {
            display: flex;
            gap: 32px;
            justify-content: center;
            margin: 0 auto 48px auto;
        }
        .shoe-card {
            background: none;
            border: none;
            width: 320px;
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        .shoe-img-box {
            position: relative;
            width: 320px;
            height: 210px;
            border-radius: 0;
            overflow: hidden;
        }
        .shoe-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /* flip horizontal orientation of shoes in the New Arrivals segment */
        #new-arrivals .shoe-img {
            transform: scaleX(-1);
        }
        .badge-sale {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #b71c1c;
            color: #fff;
            font-size: 0.98rem;
            font-weight: 500;
            border-radius: 12px;
            padding: 4px 18px;
            z-index: 2;
        }
        .badge-new {
            position: absolute;
            top: 16px;
            left: 16px;
            background: #222;
            color: #fff;
            font-size: 0.98rem;
            font-weight: 500;
            border-radius: 12px;
            padding: 4px 18px;
            z-index: 2;
        }
        .shoe-info-box {
            background: #f7f7f7;
            border-radius: 0;
            padding: 16px 18px 12px 18px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .shoe-info-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.08rem;
            font-weight: 500;
            color: #222;
        }
        .shoe-brand {
            font-weight: 600;
        }
        .shoe-price {
            font-weight: 500;
            color: #222;
        }
        .shoe-price-old {
            text-decoration: line-through;
            color: #888;
            margin-right: 8px;
            font-size: 0.98rem;
        }
        .shoe-info-bottom {
            font-size: 0.98rem;
            color: #444;
        }
        .brand-filter-row {
            display: flex;
            gap: 18px;
            justify-content: center;
            margin: 0 auto 32px auto;
        }
        .brand-filter-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f2f2f2;
            color: #222;
            border: none;
            border-radius: 18px;
            padding: 8px 22px;
            font-size: 1.05rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .brand-filter-btn.active {
            background: #222;
            color: #fff;
        }
        .brand-filter-btn img {
            width: 18px;
            height: 18px;
        }
        .arrival-row {
            display: flex;
            gap: 32px;
            justify-content: center;
            margin: 0 auto 48px auto;
        }
        .brands-panel {
            display: flex;
            gap: 36px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            padding: 12px 0;
            margin: 0 auto 64px auto;
        }
        .brand-card {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 220px;
            height: auto;
            padding: 20px;
            background: transparent;
            border-radius: 6px;
        }
        .brand-logo-link{display:block;text-align:center;width:100%;}
        .brand-logo {
            max-width: 60%;
            height: auto;
            display: inline-block;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.08));
        }
        /* increase specific logos by ~30% */
        .brand-logo--nike,
        .brand-logo--adidas,
        .brand-logo--newbalance {
            max-width: 78%;
        }
        .footer-section {
            background: #111;
            color: #fff;
            padding: 48px 7vw 24px 7vw;
            margin-top: 64px;
        }
        .footer-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 48px;
        }
        .footer-left {
            flex: 2;
        }
        .footer-header {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 18px;
        }
        .footer-subheader {
            font-size: 1.05rem;
            font-weight: 400;
            margin-bottom: 12px;
        }
        .footer-divider {
            width: 100%;
            height: 2px;
            background: #444;
            margin: 18px 0 12px 0;
        }
        .footer-note {
            font-size: 0.92rem;
            color: #bbb;
            margin-top: 12px;
        }
        .footer-right {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-end;
        }
        .footer-link {
            color: #fff;
            font-size: 1.05rem;
            text-decoration: none;
            margin-bottom: 2px;
            transition: color 0.2s;
        }
        .footer-link:hover {
            color: #b71c1c;
        }
        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
            max-height: 340px;
            padding-right: 8px;
        }
        @media (max-width: 1200px) {
            .banner, .banner-section {
                height: 220px;
            }
            .shoe-card, .shoe-img-box {
                width: 220px;
                height: 140px;
            }
            .brands-panel {
                gap: 18px;
            }
            .brand-card {
                height: 160px;
            }
        }
        @media (max-width: 900px) {
            .homepage-header {
                padding: 0 12px;
            }
            .banner-content {
                left: 4vw;
                top: 24px;
            }
            .section-header {
                margin-left: 4vw;
            }
            .sale-row, .arrival-row, .brand-filter-row, .brands-panel {
                margin-left: 4vw;
            }
            .brands-panel {
                margin-right: 4vw;
            }
            .footer-section {
                padding: 32px 4vw 18px 4vw;
            }
        }
        @media (max-width: 700px) {
            .homepage-header {
                flex-direction: column;
                height: auto;
                gap: 8px;
            }
            .header-left, .header-right {
                gap: 10px;
            }
            .banner, .banner-section {
                height: 120px;
            }
            .banner-content {
                left: 2vw;
                top: 12px;
            }
            .section-header {
                font-size: 1.2rem;
            }
            .sale-row, .arrival-row {
                flex-direction: column;
                gap: 18px;
            }
            .shoe-card, .shoe-img-box {
                width: 98vw;
                height: 120px;
            }
            .brands-panel {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(4, 1fr);
                gap: 12px;
            }
            .brand-card {
                height: 120px;
            }
            .footer-row {
                flex-direction: column;
                gap: 18px;
            }
            .footer-right {
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <nav class="homepage-header">
        <div class="site-container">
            <div class="header-left">
                <img src="IMAGE/SHOEPAOLOGO.png" class="header-logo" alt="SHOEPAO Logo" onclick="scrollToTop()">
                <span class="header-caption" onclick="scrollToTop()">Shoe Pao Footwear</span>
                <span class="header-link" onclick="goToSale()">Sale</span>
                <span class="header-link" onclick="goToNewArrivals()">New Arrivals</span>
                <span class="header-link" id="brandNav">Brands
                    <div class="brand-dropdown" id="brandDropdown" aria-hidden="true">
                        <a href="product-list.html?brand=Nike" class="brand-drop-link" onclick="event.preventDefault(); goToBrand('Nike')"><img src="IMAGE/NIKELOGO.png" alt="Nike" style="height:28px;"></a>
                        <a href="product-list.html?brand=Adidas" class="brand-drop-link" onclick="event.preventDefault(); goToBrand('Adidas')"><img src="IMAGE/ADIDASLOGO.png" alt="Adidas" style="height:28px;"></a>
                        <a href="product-list.html?brand=Cloudtilt" class="brand-drop-link" onclick="event.preventDefault(); goToBrand('Cloudtilt')"><img src="IMAGE/CLOUDTILTLOGO.png" alt="Cloudtilt" style="height:28px;"></a>
                        <a href="product-list.html?brand=New%20Balance" class="brand-drop-link" onclick="event.preventDefault(); goToBrand('New Balance')"><img src="IMAGE/NEWBALANCELOGO.png" alt="New Balance" style="height:28px;"></a>
                    </div>
                </span>
                <span class="header-link" onclick="goToProductList()">Shop All</span>
            </div>
            <div class="header-right">
                <button class="header-icon-btn" onclick="toggleSearchBox()"><img src="IMAGE/SEARCHICON.png" class="header-icon" alt="Search"></button>
                <button class="header-icon-btn" onclick="goToUserPage()"><img src="IMAGE/USERICON.png" class="header-icon" alt="User"></button>
                <button class="header-icon-btn" onclick="goToCartPage()"><img src="IMAGE/CARTICON.png" class="header-icon" alt="Cart"></button>
            </div>
            <div class="search-box" id="searchBox">
                <input type="text" class="search-input" id="searchInput" placeholder="Search products..." onkeydown="searchKeyDown(event)">
            </div>
        </div>
    </nav>
    <script>
    // Ensure a fresh visitor is not treated as signed-in by leftover localStorage.profile entries.
    document.addEventListener('DOMContentLoaded', function(){
        try{
            var pRaw = sessionStorage.getItem('profile') || localStorage.getItem('profile');
            if(pRaw){
                try{
                    var p = JSON.parse(pRaw || '{}');
                    // If profile exists but wasn't created via the login flow (no remember flag), remove it so visitors start signed out.
                    if(!p || !p.remember){
                        localStorage.removeItem('profile');
                        // also remove any lightweight fallback persisted checkout name
                        try{ localStorage.removeItem('checkoutCustomerName'); }catch(e){}
                        console.log('Cleared leftover profile on initial landing to ensure visitor is signed out.');
                    }
                }catch(e){ try{ localStorage.removeItem('profile'); }catch(err){} }
            }
        }catch(e){}
    });

    // Header nav helpers (home)
    function goToSale(){ window.location.href = 'product-list.html?filter=sale'; }
    function goToNewArrivals(){ window.location.href = 'product-list.html?filter=new'; }
    // Toggle brand dropdown
    document.addEventListener('DOMContentLoaded', function(){
        var brandNav = document.getElementById('brandNav');
        var brandDropdown = document.getElementById('brandDropdown');
        if(!brandNav || !brandDropdown) return;
        brandNav.addEventListener('click', function(e){
            e.stopPropagation();
            var showing = brandDropdown.style.display === 'flex';
            brandDropdown.style.display = showing ? 'none' : 'flex';
        });
        document.addEventListener('click', function(){ brandDropdown.style.display = 'none'; });
    });
    </script>
    <!-- Banner 1: New Arrivals -->
    <section class="banner-section">
        <div class="banner" style="background-image: url('IMAGE/SHOEPAOBG1.png');">
            <div class="banner-content">
                <div class="banner-header">New Arrivals</div>
                <div class="banner-subheader">New Arrivals for Nike, Adidas, New Balance, and many more.</div>
                <button id="shopBrandsBtn" class="banner-btn" onclick="goToProductList()">Shop Brands <span class="arrow"></span></button>
            </div>
        </div>
    </section>
    <!-- Banner 2: AR Try-on -->
        <section class="banner-section">
        <div class="banner" style="background-image: url('IMAGE/SHOEPAOBG2.png'); background-size: cover; background-position: center;">
                <div class="banner-content">
                <div class="banner-header">AR Visual Shoe Try-on</div>
                <div class="banner-subheader">Virtually try your preferred shoes to see how it looks on you!.</div>
                <button id="tryOnBtn" class="banner-btn" onclick="goToARTryOn()">Try-on Shoes Now <span class="arrow"></span></button>
            </div>
        </div>
    </section>
    <div class="site-container">
    <!-- Sale Section -->
    <section id="sale">
        <div class="section-header">Sale</div>
        <div class="sale-row">
            <div class="shoe-card" style="cursor:pointer;" onclick="viewProduct('Cloudtilt','Cloudtilt Iron Dew Womens','P1,299.00','IMAGE/SALESSHOE1.png','Sale')">
                <div class="shoe-img-box">
                    <img src="IMAGE/SALESSHOE1.png" class="shoe-img" alt="Cloudtilt Iron Dew Womens">
                    <span class="badge-sale">Sale</span>
                </div>
                <div class="shoe-info-box">
                    <div class="shoe-info-top">
                        <span class="shoe-brand">Cloudtilt</span>
                        <span><span class="shoe-price-old">P2,295.00</span><span class="shoe-price">P1,299.00</span></span>
                    </div>
                    <div class="shoe-info-bottom">Cloudtilt Iron Dew Womens</div>
                </div>
            </div>
            <div class="shoe-card" style="cursor:pointer;" onclick="viewProduct('New Balance','New Balance 530','P1,299.00','IMAGE/SALESSHOE2.png','Sale')">
                <div class="shoe-img-box">
                    <img src="IMAGE/SALESSHOE2.png" class="shoe-img" alt="New Balance 530">
                    <span class="badge-sale">Sale</span>
                </div>
                <div class="shoe-info-box">
                    <div class="shoe-info-top">
                        <span class="shoe-brand">New Balance</span>
                        <span><span class="shoe-price-old">P2,295.00</span><span class="shoe-price">P1,299.00</span></span>
                    </div>
                    <div class="shoe-info-bottom">New Balance 530</div>
                </div>
            </div>
        </div>
    </section>

    <!-- New Arrival Section -->
    <section id="new-arrivals">
        <div class="section-header">New Arrival</div>
        <div class="brand-filter-row">
            <button class="brand-filter-btn active" data-brand="Nike" onclick="toggleBrandFilter(this)"><img src="IMAGE/STARICON.png" alt="Star">Nike</button>
            <button class="brand-filter-btn" data-brand="New Balance" onclick="toggleBrandFilter(this)"><img src="IMAGE/STARICON.png" alt="Star">New Balance</button>
            <button class="brand-filter-btn" data-brand="Cloudtilt" onclick="toggleBrandFilter(this)"><img src="IMAGE/STARICON.png" alt="Star">Cloudtilt</button>
            <button class="brand-filter-btn" data-brand="Adidas" onclick="toggleBrandFilter(this)"><img src="IMAGE/STARICON.png" alt="Star">Adidas</button>
        </div>
        <div class="arrival-row" id="arrivalRow">
            <div class="shoe-card" data-brand="Nike" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax TN Aqua Blue','P1,299.00','IMAGE/NARRIVAL1.png','New')">
                <div class="shoe-img-box">
                    <img src="IMAGE/NARRIVAL1.png" class="shoe-img" alt="Nike Airmax TN Aqua Blue">
                    <span class="badge-new">New</span>
                </div>
                <div class="shoe-info-box">
                    <div class="shoe-info-top">
                        <span class="shoe-brand">Nike</span>
                        <span class="shoe-price">P1,299.00</span>
                    </div>
                    <div class="shoe-info-bottom">Nike Airmax TN Aqua Blue</div>
                </div>
            </div>
            <div class="shoe-card" data-brand="Nike" style="cursor:pointer;" onclick="viewProduct('Nike','Nike Airmax Black','P2,395.00','IMAGE/NARRIVAL2.png','New')">
                <div class="shoe-img-box">
                    <img src="IMAGE/NARRIVAL2.png" class="shoe-img" alt="Nike Airmax Black">
                    <span class="badge-new">New</span>
                </div>
                <div class="shoe-info-box">
                    <div class="shoe-info-top">
                        <span class="shoe-brand">Nike</span>
                        <span class="shoe-price">P2,395.00</span>
                    </div>
                    <div class="shoe-info-bottom">Nike Airmax Black</div>
                </div>
            </div>
            <div class="shoe-card" data-brand="Nike" style="cursor:pointer;" onclick="viewProduct('Nike','Nike GT CUT 2 LEAP HIGH','P2,395.00','IMAGE/NARRIVAL3.png','New')">
                <div class="shoe-img-box">
                    <img src="IMAGE/NARRIVAL3.png" class="shoe-img" alt="Nike GT CUT 2 LEAP HIGH">
                    <span class="badge-new">New</span>
                </div>
                <div class="shoe-info-box">
                    <div class="shoe-info-top">
                        <span class="shoe-brand">Nike</span>
                        <span class="shoe-price">P2,395.00</span>
                    </div>
                    <div class="shoe-info-bottom">Nike GT CUT 2 LEAP HIGH</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Brands Section -->
    <section id="brands">
        <div class="brands-panel">
                <div class="brand-card">
                    <a class="brand-logo-link" href="product-list.html?brand=Nike"><img src="IMAGE/NIKELOGO.png" class="brand-logo brand-logo--nike" alt="Nike"></a>
                </div>
                <div class="brand-card">
                    <a class="brand-logo-link" href="product-list.html?brand=Adidas"><img src="IMAGE/ADIDASLOGO.png" class="brand-logo brand-logo--adidas" alt="Adidas"></a>
                </div>
                <div class="brand-card">
                    <a class="brand-logo-link" href="product-list.html?brand=Cloudtilt"><img src="IMAGE/CLOUDTILTLOGO.png" class="brand-logo" alt="Cloudtilt"></a>
                </div>
                <div class="brand-card">
                    <a class="brand-logo-link" href="product-list.html?brand=New%20Balance"><img src="IMAGE/NEWBALANCELOGO.png" class="brand-logo brand-logo--newbalance" alt="New Balance"></a>
                </div>
        </div>
    </section>

    <!-- Footer Section -->
    </div>
    <footer class="footer-section">
        <div class="site-container">
            <div class="footer-row">
            <div class="footer-left">
                <div class="footer-header">Have questions?</div>
                <div class="footer-subheader">Contact us at our facebook page</div>
                <div class="footer-subheader" style="margin-top: 18px;">Or via phone/email</div>
                <div class="footer-divider"></div>
                <div class="footer-note">All product names, logos, brands, trademarks, and registered trademarks are the property of their respective owners. All company, product, and service names used on this website are for identification purposes only. Use of these names, logos, and brands does not imply endorsement or affiliation.<br><br>© 2025 Shoe Pao Footwear. All rights reserved.</div>
            </div>
            <div class="footer-right">
                <a href="#" class="footer-link">About Us</a>
                <a href="#" class="footer-link">Shipping</a>
                <a href="#" class="footer-link">Returns & Exchanges</a>
                <a href="#" class="footer-link">Privacy Policy</a>
                <a href="#" class="footer-link">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script>
    function viewProduct(brand, name, price, img, badge) {
        localStorage.setItem('productBrand', brand);
        localStorage.setItem('productTitle', name);
        localStorage.setItem('productPrice', price);
        localStorage.setItem('productImg', img);
        localStorage.setItem('productBadge', badge);
        window.location.href = 'product-view.html';
    }
    // Scroll to top
    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    // Scroll to section
    function scrollToSection(sectionId) {
        var el = document.getElementById(sectionId);
        if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }
    // Product list page
    function goToProductList() {
        window.location.href = 'product-list.html';
    }
    // User page
    function goToUserPage() {
    try{ var p = JSON.parse(sessionStorage.getItem('profile')||localStorage.getItem('profile')||'null'); if(!p || !p.email){ window.location.href = 'login.html'; return; } }catch(e){ window.location.href = 'login.html'; return; }
        window.location.href = 'profile.html';
    }
    // Cart page
    function goToCartPage() {
        window.location.href = 'cart.html';
    }
    // AR Try-On: open product view and request AR modal to open there
    function goToARTryOn() {
        // open product page and instruct it to open the AR modal via query param
        window.location.href = 'product-view.html?openAR=1';
    }

    // Ensure both banner buttons have the same visual width as the Try-on button.
    function syncBannerButtonWidths(){
        try{
            var tryBtn = document.getElementById('tryOnBtn');
            var shopBtn = document.getElementById('shopBrandsBtn');
            if(!tryBtn || !shopBtn) return;
            // Reset widths to natural size first
            tryBtn.style.width = 'auto';
            shopBtn.style.width = 'auto';
            // measure tryBtn rendered width (including padding)
            var rect = tryBtn.getBoundingClientRect();
            // shorten the button length by roughly half while enforcing a sensible minimum
            var w = Math.max(120, Math.ceil(rect.width / 2));
            // apply same width to both buttons
            shopBtn.style.display = 'inline-flex'; shopBtn.style.justifyContent = 'center';
            tryBtn.style.display = 'inline-flex'; tryBtn.style.justifyContent = 'center';
            shopBtn.style.width = w + 'px';
            tryBtn.style.width = w + 'px';
        }catch(e){/* ignore */}
    }

    window.addEventListener('DOMContentLoaded', function(){
        // sync widths on load and on resize to remain responsive
        syncBannerButtonWidths();
        var t;
        window.addEventListener('resize', function(){ clearTimeout(t); t = setTimeout(syncBannerButtonWidths, 120); });
    });
    // Shop Brand
    function goToBrand(brand) {
        window.location.href = 'product-list.html?brand=' + encodeURIComponent(brand);
    }
    // Search box toggle
    function toggleSearchBox() {
        var box = document.getElementById('searchBox');
        box.style.display = (box.style.display === 'block') ? 'none' : 'block';
        if (box.style.display === 'block') {
            document.getElementById('searchInput').focus();
        }
    }
    // Search input enter
    function searchKeyDown(e) {
        if (e.key === 'Enter') {
            var val = document.getElementById('searchInput').value.trim();
            if (val) {
                window.location.href = 'product-list.html?search=' + encodeURIComponent(val);
            }
        }
    }
    // Brand filter toggle
    function toggleBrandFilter(btn) {
        btn.classList.toggle('active');
        var activeBrands = Array.from(document.querySelectorAll('.brand-filter-btn.active')).map(b => b.getAttribute('data-brand'));
        var cards = document.querySelectorAll('#arrivalRow .shoe-card');
        cards.forEach(card => {
            if (activeBrands.length === 0 || activeBrands.includes(card.getAttribute('data-brand'))) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }
    // Initial filter: show only Nike
    window.addEventListener('DOMContentLoaded', function() {
        var btns = document.querySelectorAll('.brand-filter-btn');
        btns.forEach(btn => {
            if (btn.getAttribute('data-brand') !== 'Nike') {
                btn.classList.remove('active');
            }
        });
        toggleBrandFilter(document.querySelector('.brand-filter-btn.active'));
    });
    </script>
    <script src="cart-storage.js"></script>
</body>

    <!-- ===== Cart Overlay + Sidebar HTML (universal) ===== -->
    <div id="cartOverlay" class="cart-overlay" aria-hidden="true"></div>
    <aside id="cartSidebar" class="cart-sidebar" aria-hidden="true" role="complementary" style="display:none;">
        <div class="cart-header-row">
            <div>
                <span class="cart-header-title">Cart (<span id="cartCount">0</span>)</span>
            </div>
            <button id="closeCartBtn" class="cart-close" aria-label="Close cart"><img src="IMAGE/X.png" alt="Close" style="width:20px;height:20px;"></button>
        </div>
        <div class="cart-divider"></div>
        <div id="cartItems" class="cart-items">
            <div class="cart-empty">Your cart is empty</div>
        </div>
        <div class="cart-divider"></div>
        <div class="cart-subtotal-row">
            <span class="cart-subtotal-label">Subtotal</span>
            <span id="cartSubtotal" class="cart-subtotal-value">₱0.00</span>
        </div>
        <button id="checkoutBtn" class="cart-checkout-btn">Checkout</button>
    </aside>
    <!-- ===== Cart Sidebar Behavior (universal) ===== -->
    <script>
    (function(){
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        function parsePriceToNumber(priceText) {
            if (!priceText) return 0;
            var v = priceText.replace(/[^0-9.]/g, '');
            return parseFloat(v || 0);
        }
        function formatPHP(amount) {
            try {
                return new Intl.NumberFormat('en-PH', { style: 'currency', currency: 'PHP' }).format(amount);
            } catch (e) {
                return '₱' + Number(amount).toFixed(2);
            }
        }
        function saveCartToLocalStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        const cartOverlay = document.getElementById('cartOverlay');
        const cartSidebar = document.getElementById('cartSidebar');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartCountEl = document.getElementById('cartCount');
        const cartSubtotalEl = document.getElementById('cartSubtotal');
        const closeCartBtn = document.getElementById('closeCartBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');
        function getNavCartButton() {
            const img = document.querySelector('img[alt="Cart"]');
            if (!img) return null;
            return img.closest('button');
        }
        function openCartSidebar() {
            cartOverlay.classList.add('show');
            cartSidebar.classList.add('open');
            cartSidebar.style.display = 'block';
            document.body.style.overflow = 'hidden';
            cartSidebar.setAttribute('aria-hidden', 'false');
            cartOverlay.setAttribute('aria-hidden', 'false');
        }
        function closeCartSidebar() {
            cartOverlay.classList.remove('show');
            cartSidebar.classList.remove('open');
            cartSidebar.style.display = 'none';
            document.body.style.overflow = '';
            cartSidebar.setAttribute('aria-hidden', 'true');
            cartOverlay.setAttribute('aria-hidden', 'true');
        }
        function renderCart() {
            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                const empty = document.createElement('div');
                empty.className = 'cart-empty';
                empty.textContent = 'Your cart is empty';
                cartItemsContainer.appendChild(empty);
                cartCountEl.textContent = 0;
                cartSubtotalEl.textContent = formatPHP(0);
                saveCartToLocalStorage();
                return;
            }
            let subtotal = 0;
            let totalQty = 0;
            cart.forEach((item, index) => {
                subtotal += item.price * item.quantity;
                totalQty += item.quantity;
                const box = document.createElement('div');
                box.className = 'cart-item-box';
                const img = document.createElement('img');
                img.className = 'cart-item-img';
                img.src = item.image || 'IMAGE/NIKE1.png';
                img.alt = item.title || 'Product';
                const middle = document.createElement('div');
                middle.className = 'cart-item-middle';
                const title = document.createElement('div');
                title.className = 'cart-item-title';
                title.textContent = item.title;
                const brand = document.createElement('div');
                brand.className = 'cart-item-brand';
                brand.textContent = item.brand;
                const size = document.createElement('div');
                size.className = 'cart-item-size';
                size.textContent = 'Size: ' + (item.size || '');
                const qtyControls = document.createElement('div');
                qtyControls.className = 'cart-quantity-controls';
                const lessenBtn = document.createElement('button');
                lessenBtn.className = 'qty-btn decrease';
                lessenBtn.setAttribute('data-index', index);
                const lessenImg = document.createElement('img');
                lessenImg.src = 'IMAGE/LessenBTN.png';
                lessenImg.alt = '-';
                lessenImg.style.width = '22px';
                lessenImg.style.height = '22px';
                lessenBtn.appendChild(lessenImg);
                const qtyText = document.createElement('span');
                qtyText.className = 'cart-item-qty';
                qtyText.textContent = item.quantity;
                const addBtn = document.createElement('button');
                addBtn.className = 'qty-btn increase';
                addBtn.setAttribute('data-index', index);
                const addImg = document.createElement('img');
                addImg.src = 'IMAGE/AddBTN.png';
                addImg.alt = '+';
                addImg.style.width = '22px';
                addImg.style.height = '22px';
                addBtn.appendChild(addImg);
                qtyControls.appendChild(lessenBtn);
                qtyControls.appendChild(qtyText);
                qtyControls.appendChild(addBtn);
                middle.appendChild(title);
                middle.appendChild(brand);
                middle.appendChild(size);
                middle.appendChild(qtyControls);
                const removeBtn = document.createElement('button');
                removeBtn.className = 'cart-item-remove';
                removeBtn.setAttribute('data-index', index);
                const trashImg = document.createElement('img');
                trashImg.src = 'IMAGE/TrashIcon.png';
                trashImg.alt = 'Remove';
                trashImg.style.width = '18px';
                trashImg.style.height = '18px';
                removeBtn.appendChild(trashImg);
                const priceEl = document.createElement('div');
                priceEl.className = 'cart-item-price';
                priceEl.textContent = formatPHP(item.price * item.quantity);
                box.appendChild(img);
                box.appendChild(middle);
                box.appendChild(removeBtn);
                box.appendChild(priceEl);
                cartItemsContainer.appendChild(box);
            });
            cartCountEl.textContent = totalQty;
            cartSubtotalEl.textContent = formatPHP(subtotal);
            attachCartEvents();
        }
        function attachCartEvents() {
            document.querySelectorAll('.qty-btn.decrease').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx) && cart[idx]) {
                        if (cart[idx].quantity > 1) {
                            cart[idx].quantity--;
                        }
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
            document.querySelectorAll('.qty-btn.increase').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx) && cart[idx]) {
                        cart[idx].quantity++;
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.onclick = function(e) {
                    const idx = parseInt(btn.getAttribute('data-index'), 10);
                    if (!isNaN(idx)) {
                        cart.splice(idx, 1);
                        renderCart();
                        saveCartToLocalStorage();
                    }
                };
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            const navCartBtn = getNavCartButton();
            if (navCartBtn) {
                navCartBtn.removeAttribute('onclick');
                navCartBtn.addEventListener('click', function(e){
                    e.preventDefault();
                    openCartSidebar();
                });
            }
            if (closeCartBtn) closeCartBtn.addEventListener('click', closeCartSidebar);
            if (cartOverlay) cartOverlay.addEventListener('click', closeCartSidebar);
            renderCart();
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', function(){
                    window.location.href = 'checkout.html';
                });
            }
        });
    })();
    </script>
</html>
